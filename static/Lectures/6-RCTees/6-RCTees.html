<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Multiple Regression &amp;    Fundamentals of Causal Inference</title>
    <meta charset="utf-8" />
    <meta name="author" content="Merlin Schaeffer  Department of Sociology" />
    <meta name="date" content="2025-10-06" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/tile-view/tile-view.css" rel="stylesheet" />
    <script src="libs/tile-view/tile-view.js"></script>
    <link href="libs/tachyons/tachyons.min.css" rel="stylesheet" />
    <link href="libs/panelset/panelset.css" rel="stylesheet" />
    <script src="libs/panelset/panelset.js"></script>
    <script src="libs/kePrint/kePrint.js"></script>
    <link href="libs/lightable/lightable.css" rel="stylesheet" />
    <link rel="stylesheet" href="../template/Merlin169.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# Multiple Regression &amp; <br><br> Fundamentals of Causal Inference
]
.subtitle[
## Randomized Controlled Trials (RCT) <br><br> The Gold Standard of Causal Inference
]
.author[
### Merlin Schaeffer<br> Department of Sociology
]
.date[
### 2025-10-06
]

---


class: clear

&lt;img src="https://pbs.twimg.com/media/EouSsOKUUAM0P_y.jpg" width="60%" style="display: block; margin: auto;" /&gt;
.backgrnote[.center[*Source:* Polack, Thomas, Kitchin, Absalon, Gurtman, Lockhart, Perez, Pérez Marc, Moreira, Zerbini, Bailey, Swanson, Roychoudhury, Koury, Li, Kalina, Cooper, Frenck, Hammitt, Türeci, Nell, Schaefer, Ünal, Tresnan, Mather, Dormitzer, Şahin, Jansen, and Gruber (2020)]]

---
# Goal of empirical sociology

.font130[.center[Use data to discover patterns, &lt;br&gt; and the .alert[social mechanisms that bring them about.]]]

&lt;img src="https://researchleap.com/wp-content/uploads/2021/12/Population-data.jpeg" width="65%" style="display: block; margin: auto;" /&gt;

---
class: inverse middle
# Today's schedule

1. **Today's research question**: The Integration Paradox

2. **Experiments**
  + Randmozied Controlled Trials (RCTs)
  + RCTs, potential outcomes, and DAGs

---
class: inverse
# The Integration Paradox .font60[Research question of the day]

.right-column[
&lt;img src="img/Shocking.jpeg" width="60%" style="display: block; margin: auto;" /&gt;

&lt;img src="img/Steinmann1.png" width="100%" style="display: block; margin: auto;" /&gt;&lt;img src="img/Steinmann2.png" width="100%" style="display: block; margin: auto;" /&gt;

&lt;img src="img/Steinmann3.png" width="100%" style="display: block; margin: auto;" /&gt;
.font70[.center[*Source:* Steinmann (2019)]]
]

.left-column[.center[.font110[
**Does news media consumption** &lt;br&gt;&lt;br&gt; _**increase**_ &lt;br&gt;&lt;br&gt; **immigrant minorities' reports of discrimination?**
]]]

---
# Preparation

.panelset[
.panel[.panel-name[Packages for today's session]

``` r
pacman::p_load( # Load several R packages using the pacman package manager
  tidyverse,  # A collection of packages for data manipulation and visualization
  ggplot2,    # Powerful package for creating static, animated and interactive visualizations
  estimatr,   # Package for fast estimators for regression with weighted data
  modelr,     # Provides functions for modelling and prediction
  kableExtra, # Enhances table creation in R
  modelsummary) # Creates tables and plots to summarize statistical models
```
]
.panel[.panel-name[The APAD survey]
.left-column[.font80[
- Schaeffer, Kas, and Hagedorn (2023)
- 1093 Immigrants and children of immigrants.
- Berlin, Hamburg, Munich, Frankfurt, and Cologne.
- Interviewed August 2021.
- Financed by [German Research Council (DFG)](https://gepris.dfg.de/gepris/projekt/428878477?language=en)
]]

.right-column[.font80[
1. &gt; On a typical day, about how much time do you spend watching, reading, or listening to news about politics and current affairs? *Please give your answer in hours and then minutes.*

2. &gt; Now we would like to ask you about discrimination. How often were you personally discriminated in the following situations here in Germany? .backgrnote[
Discrimination means that a person is treated worse than others including specific reasons for this behavior and no factual justification. People use different modes of discrimination like insult, ostracism, or sexual harassment. Rules and laws disadvantaging people are also discrimination.]
&gt; ... When looking for work or an apprenticeship&lt;br&gt;
&gt; ... At work / in professional life&lt;br&gt;
&gt; ... While attending school or higher education&lt;br&gt;
&gt; ... When looking for housing&lt;br&gt;
&gt; ... When having contact with government officials or public administrators&lt;br&gt;
&gt; ... When you were out in public during your free time&lt;br&gt;&lt;br&gt;
&gt; (1) Never, (2) Rarely, (3) Sometimes, (4) Often, (5) Very often&lt;br&gt;
]]
]

.panel[.panel-name[Get the APAD data]
.push-left[.font80[



``` r
load("APAD.RData") # Load APAD dataset
```


``` r
APAD &lt;- APAD %&gt;% mutate( # Process APAD data
  # Convert news consumption to minutes
  # Example: 2 hours and 30 minutes becomes 2*60 + 30 = 150 minutes
  news = news_hrs*60 + news_mins, 
  # Create binary variable for news consumption
  news_yn = case_when(
    news &lt; 15 ~ 0,  # 0 if less than 15 minutes
    news &gt;= 15 ~ 1, # 1 if 15 minutes or more
    TRUE ~ as.numeric(NA)), # Handle other cases as missing
  # Calculate average discrimination index across multiple domains
  dis_index = rowMeans( # Calculate the mean for each row (participant)
    select(., # Choose specific discrimination columns from "." (APAD)
           dis_trainee, dis_job, dis_school, 
           dis_house, dis_gov, dis_public),
    na.rm = TRUE), # Ignore NA values
  # Standardize discrimination index
  # scale() standardizes; as.numeric() converts to numeric vector
  z_dis_index = scale(dis_index) %&gt;% as.numeric()
)
```
]]

.push-right[.font80[
&lt;br&gt;

```
# # A tibble: 1,093 × 24
#    antidiscr_law dis_index news_hrs news_mins dis_trainee dis_job dis_school dis_house dis_gov dis_public gewFAKT
#            &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;   &lt;dbl&gt;
#  1             5      3.17        1         0           3       3          4         5       2          2   0.105
#  2             4      1.8         1         1           5      NA          1         1       1          1   0.103
#  3             3      2           0        30           1       2          1         3       3          2   0.802
#  4             5      2.83        0        10           3       3          2         5       1          3   0.104
#  5             4      3.2         0        30           2       3         NA         5       3          3   0.639
#  6             5      2.75        2         0          NA       2         NA         4       3          2   0.2  
#  7             2      1           3        58           1       1          1         1       1          1   2.42 
#  8             4      1.67        5         0           3       1          1         3       1          1   0.102
#  9             5      4           1        15           4       4          4         4       4          4   6.19 
# 10             4      1.33        0        30           1       2          1         1       1          2   2.08 
# # ℹ 1,083 more rows
# # ℹ 13 more variables: gender &lt;fct&gt;, age &lt;dbl&gt;, imor &lt;fct&gt;, german &lt;fct&gt;, nbh_exposed &lt;dbl&gt;, appearance &lt;fct&gt;,
# #   article &lt;chr&gt;, ment_happy &lt;dbl&gt;, leftright &lt;dbl&gt;, gen_trust &lt;dbl&gt;, news &lt;dbl&gt;, news_yn &lt;dbl&gt;,
# #   z_dis_index &lt;dbl&gt;
```
]]

]]

---
# Fruitless\naïv comparison

.push-left[
&lt;img src="6-RCTees_files/figure-html/naiv-1.png" width="98%" style="display: block; margin: auto;" /&gt;
]

--

.push-right[.font80[

``` r
ols &lt;- lm_robust(dis_index ~ news_yn, # Run weighted OLS
                 weight = gewFAKT, data = APAD)

modelsummary( # Create summary table of OLS results
  list("Discr." = ols), # List of OLS model objects
  stars = TRUE, # Indicate significance level
  # Choose Goodness of Fit indicators
  gof_map = c("nobs", "r.squared"), 
  output = "kableExtra") # Format as HTML
```

&lt;table style="NAborder-bottom: 0; width: auto !important; margin-left: auto; margin-right: auto;" class="table"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt;   &lt;/th&gt;
   &lt;th style="text-align:center;"&gt; Discr. &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; (Intercept) &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 2.187*** &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (0.116) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; news_yn &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; −0.093 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;box-shadow: 0px 1.5px"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;box-shadow: 0px 1.5px"&gt; (0.129) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Num.Obs. &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 1085 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; R2 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.002 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;tfoot&gt;&lt;tr&gt;&lt;td style="padding: 0; " colspan="100%"&gt;
&lt;sup&gt;&lt;/sup&gt; + p &amp;lt; 0.1, * p &amp;lt; 0.05, ** p &amp;lt; 0.01, *** p &amp;lt; 0.001&lt;/td&gt;&lt;/tr&gt;&lt;/tfoot&gt;
&lt;/table&gt;


]]

---
# Why? Selection bias!

`$$\begin{equation} \begin{split}
\underbrace{Avg_{n}[Y_{1i}|D_{i} = 1] - Avg_{n}[Y_{0i}|D_{i} = 0]}_{\text{Difference in observed group means}} = \underbrace{Avg_{n}[Y_{1i}|D_{i} = 1] \color{gray}{(-  Avg_{n}[Y_{0i}|D_{i} = 1]}}_{\text{Average causal effect } among \text{ } the \text{ } treated} \color{gray}{+} \underbrace{\color{gray}{Avg_{n}[Y_{0i}|D_{i} = 1])} -  Avg_{n}[Y_{0i}|D_{i} = 0]}_{\text{Selection bias}}.
\end{split} \end{equation}$$`


.content-box-red[.center[
`\(\text{Selection bias} = \underbrace{Avg_{n}[Y_{0i} | D_{i} = 1]}_{\text{Unobserved!}} - Avg_{n}[Y_{0i} | D_{i} = 0].\)`

`\(\rightarrow\)` The difference in `\(Avg_{n}(Y_{0i})\)`, the baseline of the outcome, between the groups we compare.
]]

---
# (Im-)balance .font70[.alert[of oberserved variables!]]

.panelset[
.panel[.panel-name[R code]

``` r
APAD %&gt;% # Start with the APAD dataset, then pipe
  # Select specific variables for the balance test
  select(news_yn, age, nbh_exposed, imor, german, gewFAKT) %&gt;%
* # Rename the weights variable so that the following
* # command (datasummary_balance) automatically treats it as a weight
* rename(weights = gewFAKT) %&gt;%
* # Create a balance table
* datasummary_balance(
*   # Formula specifies to compare groups based on news_yn
*   formula = ~ news_yn,
*   data = ., # Use the data piped in from above
*   # Provide a title for the table
*   title = "Socio-demographic characteristics of those who read news and those who do not",
*   output = "kableExtra"# Specify the output format as kableExtra
* )
```

]
.panel[.panel-name[Balance table]
&lt;table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;"&gt;
&lt;caption&gt;Socio-demographic characteristics of those who read news and those who do not&lt;/caption&gt;
 &lt;thead&gt;
&lt;tr&gt;
&lt;th style="empty-cells: hide;border-bottom:hidden;" colspan="2"&gt;&lt;/th&gt;
&lt;th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2"&gt;&lt;div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; "&gt;0&lt;/div&gt;&lt;/th&gt;
&lt;th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2"&gt;&lt;div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; "&gt;1&lt;/div&gt;&lt;/th&gt;
&lt;th style="empty-cells: hide;border-bottom:hidden;" colspan="2"&gt;&lt;/th&gt;
&lt;/tr&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt;   &lt;/th&gt;
   &lt;th style="text-align:left;"&gt;    &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Mean &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Std. Dev. &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Mean &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Std. Dev. &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Diff. in Means &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Std. Error &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; age &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 36.7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 12.3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 43.8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 15.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7.1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2.2 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;box-shadow: 0px 1.5px"&gt; nbh_exposed &lt;/td&gt;
   &lt;td style="text-align:left;box-shadow: 0px 1.5px"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;box-shadow: 0px 1.5px"&gt; 4.2 &lt;/td&gt;
   &lt;td style="text-align:right;box-shadow: 0px 1.5px"&gt; 0.8 &lt;/td&gt;
   &lt;td style="text-align:right;box-shadow: 0px 1.5px"&gt; 4.2 &lt;/td&gt;
   &lt;td style="text-align:right;box-shadow: 0px 1.5px"&gt; 1.0 &lt;/td&gt;
   &lt;td style="text-align:right;box-shadow: 0px 1.5px"&gt; −0.0 &lt;/td&gt;
   &lt;td style="text-align:right;box-shadow: 0px 1.5px"&gt; 0.1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; N &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; Pct. &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; N &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; Pct. &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; imor &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Child of immigrant &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 64 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 29.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 399 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 45.6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Immigrant &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 154 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 70.6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 476 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 54.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; german &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Ja &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 89 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 40.8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 561 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 64.1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Nein &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 129 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 59.2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 314 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 35.9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;


]]

---
# Directed Acyclical Graphs (DAG)


&lt;img src="6-RCTees_files/figure-html/DAG2-1.png" width="70%" style="display: block; margin: auto;" /&gt;

.backgrnote[
The red bi-directed arrow is officially not part of the DAG. But helps it helps us to understand that the correlation between Discrimination and Reading the news is not causal in nature. The reason for this non-causal relationship is the existence of a backdoor path. The backdoor path is opened by German citizenship, which influences whether people read the news but also how much discrimination they experience.
]

---
class: inverse middle center
# Experiments

---
layout: true
# Experiment

.left-column[
- We do not *passively observe*, &lt;br&gt; we .alert[actively intervene].

- Thereby *we* control, who gets `\(D\)` and who does not!

&lt;img src="./img/randomization1.png" width="80%" style="display: block; margin: auto;" /&gt;
]

---

.push-right[
&lt;img src="6-RCTees_files/figure-html/DAG3-1.png" width="80%" style="display: block; margin: auto;" /&gt;
]

---


.push-right[
&lt;img src="6-RCTees_files/figure-html/unnamed-chunk-12-1.png" width="70%" style="display: block; margin: auto;" /&gt;

.content-box-green[.center[
How can we `\(\color{red}{I}\)`ntervene to eliminate correlation between the treatment `\(D\)` and potential confounders `\(C\)`?
]]]

---
layout: false
class: middle center
background-image: url("https://gummibaerenland.de/cdn/shop/products/212669_lakritz_schnecken_1.jpg?v=1649245056&amp;width=1200")
background-position: center
background-size: cover


---
layout: false
class: inverse middle center
# Break

&lt;iframe src='https://panel.letstimeit.com/instant-timer/15-minute' width='600' height='400' frameborder='0' scrolling='yes'&gt;&lt;/iframe&gt;

---
class: middle clear

.left-column[
&lt;img src="https://www.laserfiche.com/wp-content/uploads/2014/10/femalecoder.jpg" width="80%" style="display: block; margin: auto;" /&gt;

&lt;iframe src='https://panel.letstimeit.com/instant-timer/20-minute' width='600' height='400' frameborder='0' scrolling='yes'&gt;&lt;/iframe&gt;
]

.right-column[
&lt;br&gt;
&lt;iframe src='exercise1.html' width='1000' height='600' frameborder='0' scrolling='yes'&gt;&lt;/iframe&gt;
]

---
layout: false
class: inverse middle center
# Break

&lt;iframe src='https://panel.letstimeit.com/instant-timer/10-minute' width='600' height='400' frameborder='0' scrolling='yes'&gt;&lt;/iframe&gt;

---
layout: true
# Randomized Controlled Trials (RCT)


.push-left[

&lt;img src="./img/randomization2.png" width="100%" style="display: block; margin: auto;" /&gt;

- We .alert[randomly] decide, who gets: 
  + `\(\text{Read news = 0} \rightarrow\)` *Control* group, 
  + `\(\text{Read news = 1} \rightarrow\)` *Treatment* group.
]

---

---

.push-right[

&lt;img src="https://media1.giphy.com/media/v1.Y2lkPTc5MGI3NjExaGJzdDlrMXNwNTFtNHlpd3ppM2p6NmVsYjBmZGczOXJyNnBmdzFoOSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/Ps8XflhsT5EVa/giphy.webp" width="70%" style="display: block; margin: auto;" /&gt;

Remember, randomization is "fair": 

Everyone has the same probability to be part of the treatment or control group, .alert[regardless of who they are]!

.content-box-green[
Why does this result in equal `\(Y_{0i}\)` baselines?
`$$Avg_{n}[Y_{0i}|\text{News} = 1] = Avg_{n}[Y_{0i}|\text{News} = 0]$$`
]]

---
layout: false
# Randomized Controlled Trials (RCTs)

.push-left[

If we *randomly* divide subjects into treatment and control groups, .alert[they come from the same underlying population]. 
  &lt;br&gt; &lt;br&gt; `\(\rightarrow\)` They will be similar, on average, *in every way*;&lt;br&gt; **including their `\(Y_{0}\)` **!
  &lt;br&gt; &lt;br&gt; `\(\rightarrow E[Y_{0i}|D=1] = E[Y_{0i}|D=0]\)`!
  
**Beware**, in practice randomization can fail, especially if your sample is small.
]

.push-right[
&lt;img src="./img/randomization2.png" width="90%" style="display: block; margin: auto;" /&gt;
]

---
# RCTs and potential outcomes

.push-left[
&lt;img src="./img/randomization2.png" width="60%" style="display: block; margin: auto;" /&gt;

If we *randomly* divide subjects into treatment and control groups, .alert[they come from the same underlying population]. 
    &lt;br&gt; &lt;br&gt; `\(\rightarrow\)` They will be similar, on average, *in every way*;&lt;br&gt; **including their `\(Y_{0}\)` **!
    &lt;br&gt; &lt;br&gt; `\(\rightarrow E[Y_{0i}|D=1] = E[Y_{0i}|D=0]\)`!
    
**Beware**, in practice randomization can fail, especially if your sample is small.
]

--

.push-right[

`$$\begin{equation}\begin{split} &amp;  \underbrace{E[Y_{1i}|D=1] - E[Y_{0i}|D=0]}_{\text{Comparison between treatment and control group}} \\  \\ &amp; = E[Y_{0i} + \color{red}{\kappa} |D=1] - E[Y_{0i}|D=0], \\ \\ &amp;= \color{red}{\kappa} + \underbrace{E[Y_{0i} |D=1] - E[Y_{0i}|D=0]}_{\underbrace{0}_{\text{Selection bias (if randomization has worked)}}}, \\ \\ &amp; = \underbrace{\color{red}{\kappa}.}_{\text{The average causal effect}} \end{split}\end{equation}$$`
]


---
# RCTs and DAGs

.left-column[
Because of the randomization, there is no backdoor path. That is, no path from `\(I\)` to `\(Y\)` that starts with an arrow into `\(I\)`.

`\(\Rightarrow\)` No selection/confounder bias!

**Beware**, in practice randomization can fail, especially if your sample is small.
]

.right-column[
&lt;img src="6-RCTees_files/figure-html/unnamed-chunk-18-1.png" width="70%" style="display: block; margin: auto;" /&gt;
]

---
layout: true
class: clear
.push-left[
&lt;br&gt;

.font160[.center[**APAD survey experiment**]]

We asked APAD subjects to read a news article.

&lt;img src="./img/randomization2.png" width="80%" style="display: block; margin: auto;" /&gt;

&lt;br&gt;

We .alert[randomly] decided, who got:

  + Venus `\(\rightarrow\)` *Control* group, 
  
  + Discrimination `\(\rightarrow\)` **_Treatment_ group 1**,
  
  + Acculturation `\(\rightarrow\)` **_Treatment_ group 2**.
]

---

.push-right[
&lt;img src="./img/Contr.png" width="100%" style="display: block; margin: auto;" /&gt;
]

---

.push-right[
&lt;img src="./img/Exp2.png" width="89%" style="display: block; margin: auto;" /&gt;
]

---

.push-right[
&lt;img src="./img/Exp1.png" width="75%" style="display: block; margin: auto;" /&gt;
]

---
layout: false
# Balance test

.panelset[
.panel[.panel-name[Balance table (surveyed news reading)]
&lt;table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;"&gt;
&lt;caption&gt;Socio-demographic characteristics of those who read news and those who do not&lt;/caption&gt;
 &lt;thead&gt;
&lt;tr&gt;
&lt;th style="empty-cells: hide;border-bottom:hidden;" colspan="2"&gt;&lt;/th&gt;
&lt;th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2"&gt;&lt;div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; "&gt;0&lt;/div&gt;&lt;/th&gt;
&lt;th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2"&gt;&lt;div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; "&gt;1&lt;/div&gt;&lt;/th&gt;
&lt;th style="empty-cells: hide;border-bottom:hidden;" colspan="2"&gt;&lt;/th&gt;
&lt;/tr&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt;   &lt;/th&gt;
   &lt;th style="text-align:left;"&gt;    &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Mean &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Std. Dev. &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Mean &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Std. Dev. &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Diff. in Means &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Std. Error &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; age &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 36.7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 12.3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 43.8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 15.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7.1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2.2 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;box-shadow: 0px 1.5px"&gt; nbh_exposed &lt;/td&gt;
   &lt;td style="text-align:left;box-shadow: 0px 1.5px"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;box-shadow: 0px 1.5px"&gt; 4.2 &lt;/td&gt;
   &lt;td style="text-align:right;box-shadow: 0px 1.5px"&gt; 0.8 &lt;/td&gt;
   &lt;td style="text-align:right;box-shadow: 0px 1.5px"&gt; 4.2 &lt;/td&gt;
   &lt;td style="text-align:right;box-shadow: 0px 1.5px"&gt; 1.0 &lt;/td&gt;
   &lt;td style="text-align:right;box-shadow: 0px 1.5px"&gt; −0.0 &lt;/td&gt;
   &lt;td style="text-align:right;box-shadow: 0px 1.5px"&gt; 0.1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; N &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; Pct. &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; N &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; Pct. &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; imor &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Child of immigrant &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 64 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 29.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 399 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 45.6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Immigrant &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 154 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 70.6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 476 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 54.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; german &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Ja &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 89 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 40.8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 561 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 64.1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Nein &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 129 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 59.2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 314 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 35.9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;


]
.panel[.panel-name[Balance table (RCT news)]
&lt;table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;"&gt;
&lt;caption&gt;Socio-demographic characteristics of those who read news and those who do not&lt;/caption&gt;
 &lt;thead&gt;
&lt;tr&gt;
&lt;th style="empty-cells: hide;border-bottom:hidden;" colspan="2"&gt;&lt;/th&gt;
&lt;th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2"&gt;&lt;div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; "&gt;Contr (N=358)&lt;/div&gt;&lt;/th&gt;
&lt;th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2"&gt;&lt;div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; "&gt;Treat_1 (N=375)&lt;/div&gt;&lt;/th&gt;
&lt;th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2"&gt;&lt;div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; "&gt;Treat_2 (N=360)&lt;/div&gt;&lt;/th&gt;
&lt;/tr&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt;   &lt;/th&gt;
   &lt;th style="text-align:left;"&gt;    &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Mean &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Std. Dev. &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Mean &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Std. Dev. &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Mean &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Std. Dev. &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; news_yn &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.4 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; age &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41.8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 15.7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41.2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 12.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 43.8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16.9 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;box-shadow: 0px 1.5px"&gt; nbh_exposed &lt;/td&gt;
   &lt;td style="text-align:left;box-shadow: 0px 1.5px"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;box-shadow: 0px 1.5px"&gt; 4.2 &lt;/td&gt;
   &lt;td style="text-align:right;box-shadow: 0px 1.5px"&gt; 0.9 &lt;/td&gt;
   &lt;td style="text-align:right;box-shadow: 0px 1.5px"&gt; 4.2 &lt;/td&gt;
   &lt;td style="text-align:right;box-shadow: 0px 1.5px"&gt; 1.1 &lt;/td&gt;
   &lt;td style="text-align:right;box-shadow: 0px 1.5px"&gt; 4.2 &lt;/td&gt;
   &lt;td style="text-align:right;box-shadow: 0px 1.5px"&gt; 1.0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; N &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; Pct. &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; N &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; Pct. &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; N &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; Pct. &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; imor &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Child of immigrant &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 156 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 43.6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 157 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41.9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 150 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41.7 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Immigrant &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 202 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 56.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 218 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 58.1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 210 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 58.3 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; german &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Ja &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 215 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 60.1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 222 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 59.2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 213 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 59.2 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Nein &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 143 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 39.9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 153 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 40.8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 147 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 40.8 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;


]

.panel[.panel-name[R code]

``` r
APAD %&gt;% # Start with the APAD dataset, then pipe
  # Select specific variables for the balance test
  select(article,news_yn, age, nbh_exposed, imor, german, gewFAKT) %&gt;%
* # Rename the weights variable so that the following
* # command (datasummary_balance) automatically treats it as a weight
* rename(weights = gewFAKT) %&gt;%
* # Create a balance table
* datasummary_balance(
*   # Formula specifies to compare groups based on treatment/control
*   formula = ~ article,
*   data = ., # Use the data piped in from above
*   # Provide a title for the table
*   title = "Socio-demographic characteristics of those who read news and those who do not",
*   output = "kableExtra"# Specify the output format as kableExtra
* )
```
]]

---
# Causal effect of news articles

.push-left[.font80[
&lt;br&gt;


``` r
# Weighted OLS to analyze survey RCT.
ols &lt;- lm_robust(dis_index ~ article, 
                 weight = gewFAKT, data = APAD)
# Weighted and z-standardized OLS to analyze survey RCT.
zols &lt;- lm_robust(z_dis_index ~ article, 
                  weight = gewFAKT, data = APAD)

modelsummary( # Formatted table comparing both OLS models
  list("Discr." = ols, "Z-Discr." = zols), # List of models
  stars = TRUE, # Show significance stars
  coef_map = c("(Intercept)" = "Intercept (Venus control)", 
               "articleTreat_1" = "Article on discrimination", 
               "articleTreat_2" = "Article on Acculturation"),
  # 'coef_map' renames coefficients for clarity
  gof_map = c("nobs", "r.squared"), # Goodness-of-fit
  output = "kableExtra") # Output format for the table
```
]]

--

.push-right[
&lt;br&gt;

&lt;table style="NAborder-bottom: 0; width: auto !important; margin-left: auto; margin-right: auto;" class="table"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt;   &lt;/th&gt;
   &lt;th style="text-align:center;"&gt; Discr. &lt;/th&gt;
   &lt;th style="text-align:center;"&gt; Z-Discr. &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Intercept (Venus control) &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 1.979*** &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; −0.171* &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (0.067) &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (0.074) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Article on discrimination &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.239* &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.264* &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (0.107) &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (0.118) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Article on Acculturation &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.137 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.151 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;box-shadow: 0px 1.5px"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;box-shadow: 0px 1.5px"&gt; (0.118) &lt;/td&gt;
   &lt;td style="text-align:center;box-shadow: 0px 1.5px"&gt; (0.130) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Num.Obs. &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 1085 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 1085 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; R2 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.012 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.012 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;tfoot&gt;&lt;tr&gt;&lt;td style="padding: 0; " colspan="100%"&gt;
&lt;sup&gt;&lt;/sup&gt; + p &amp;lt; 0.1, * p &amp;lt; 0.05, ** p &amp;lt; 0.01, *** p &amp;lt; 0.001&lt;/td&gt;&lt;/tr&gt;&lt;/tfoot&gt;
&lt;/table&gt;


]

---
# Visualize

.panelset[
.panel[.panel-name[R code]

``` r
plotdata &lt;- zols %&gt;% # Prepare data for plotting
  tidy() %&gt;% # Convert regression results to a tidy data frame
  filter(term != "(Intercept)") %&gt;% # Remove the intercept term
  mutate( # Rename treatment variables for clarity
    term = case_when(
      term == "articleTreat_1" ~ "Discrimination",
      term == "articleTreat_2" ~ "Acculturation"))

# Create the plot
ggplot(data = plotdata, aes(y = estimate, x = term)) +
  geom_hline(yintercept = 0, color = "orange", 
             lty = "dashed") + # Add a horizontal line at y=0
  # Plot point estimates and confidence intervals
  geom_pointrange(aes(min = conf.low, max = conf.high)) + 
  coord_flip() + # Flip coordinates for horizontal display
  labs(title = "Causal effect of news articles", 
       x = "Article on",
       y = "Comparison to control group (article on Venus) 
    in standard deviations",
    caption = "Note: Results are based on a weighted OLS with robust standard errors.
    N = 1085, and R2 = 0.012.") + 
  theme_minimal() # Use a minimal theme for clean appearance
```
]


.panel[.panel-name[Plot]
&lt;img src="6-RCTees_files/figure-html/unnamed-chunk-26-1.png" width="65%" style="display: block; margin: auto;" /&gt;
]]

---
# Learning goal achieved!

.push-left[
&lt;img src="./img/SchaefferKas.png" width="75%" style="display: block; margin: auto;" /&gt;
.backgrnote[.center[*Source:* Schaeffer and Kas (2024)]]
]

.push-right[
.center[.font80[Effects of experimentally induced awareness of discrimination]]
&lt;img src="./img/pops13027-fig-0001-m.jpg" width="70%" style="display: block; margin: auto;" /&gt;
.backgrnote[.font70[
Point estimates with 90 and 95% confidence intervals based on post-stratification weighted OLS regression with (cluster-)robust standard errors.
]]]

---
class: middle clear

.left-column[
&lt;img src="https://www.laserfiche.com/wp-content/uploads/2014/10/femalecoder.jpg" width="80%" style="display: block; margin: auto;" /&gt;
]

.right-column[
&lt;iframe src='exercise2.html' width='1000' height='600' frameborder='0' scrolling='yes'&gt;&lt;/iframe&gt;
]

---
class: inverse
# Today's general lessons

1. **Experiment**: A study in which the researcher manipulates one or more variables (the "treatment") and then observes the effect of this manipulation on another variable (the "outcome").

2. **Randomized Controlled Trial (RCT)**: A type of experiment in which participants are randomly assigned to either a treatment group or a control group. The treatment group receives the treatment, while the control group does not. This randomization ensures that the two groups are as similar as possible at the start of the experiment, except for the fact that the treatment group receives the treatment and the control group does not.

3. **Randomization**: The process of randomly assigning participants to either the treatment group or the control group in an RCT. Randomization is important because it helps to ensure that the two groups are as similar as possible at the start of the experiment, which minimizes the risk of selection bias.

4. **OLS regression**: A statistical technique that can be used to analyze the results of an RCT. OLS regression can be used to estimate the causal effect of the treatment on the outcome, while controlling for the effects of other variables that may be correlated with the treatment.

---
# References

.font80[
Polack, F. P., S. J. Thomas, N. Kitchin, et al. (2020). "Safety and Efficacy of the BNT162b2 mRNA
Covid-19 Vaccine". In: _New England Journal of Medicine_, pp. 2603-2615.

Schaeffer, M. and J. Kas (2024). "The integration paradox: Does awareness of the extent of
ethno-racial discrimination increase reports of discrimination?" In: _Political Psychology_.

Schaeffer, M., J. Kas, and P. Hagedorn (2023). "The Association between Actual and Perceived
Discrimination (APAD): Technical Report". In: _SocArXiv_.

Steinmann, J. (2019). "The paradox of integration: why do higher educated new immigrants perceive more
discrimination in Germany?" In: _Journal of Ethnic and Migration Studies_, pp. 1377-1400.
]
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="../template/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
  "highlightLanguage": "r",
  "highlightStyle": "zenburn",
  "highlightLines": true,
  "countIncrementalSlides": false,
  "ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
