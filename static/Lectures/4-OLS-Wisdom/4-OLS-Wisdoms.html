<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Multiple Regression &amp;    Fundamentals of Causal Inference</title>
    <meta charset="utf-8" />
    <meta name="author" content="Merlin Schaeffer  Department of Sociology" />
    <meta name="date" content="2024-09-25" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/tile-view/tile-view.css" rel="stylesheet" />
    <script src="libs/tile-view/tile-view.js"></script>
    <link href="libs/tachyons/tachyons.min.css" rel="stylesheet" />
    <link href="libs/panelset/panelset.css" rel="stylesheet" />
    <script src="libs/panelset/panelset.js"></script>
    <script src="libs/kePrint/kePrint.js"></script>
    <link href="libs/lightable/lightable.css" rel="stylesheet" />
    <link rel="stylesheet" href="../template/Merlin169.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# Multiple Regression &amp; <br><br> Fundamentals of Causal Inference
]
.subtitle[
## 4 OLS from a assumptions to visualization
]
.author[
### Merlin Schaeffer<br> Department of Sociology
]
.date[
### 2024-09-25
]

---



# Goal of empirical sociology

.font130[.center[Use data to .alert[discover patterns], &lt;br&gt; and the social mechanisms that bring them about.]]

&lt;img src="https://liu.se/-/media/istock-501261958.jpg?mw=1120&amp;mh=1120&amp;hash=DA8977CCE6A6E600AE80A40CFEE771C9" width="70%" style="display: block; margin: auto;" /&gt;
---
class: inverse
# Today's schedule

1. **Today's research question**: Colonialism and poverty
  
2. **OLS assumptions**
  + No outliers
  + Linearity
  
3. **Categorical predictors**
  + Dummy coding
  
4. **Binary outcomes**
  + Linear probability model (LPM)
  
5. **Visualizing regression**
  + Coefficient plots
  + Model predictions
  
---
class: inverse
# Colonial legacy

.push-left[
&lt;img src="https://cdn.cfr.org/sites/default/files/styles/open_graph_article/public/image/2020/01/France-Macron-Pau-Summit-G5-Sahel.jpg?h=63648819" width="100%" style="display: block; margin: auto;" /&gt;
]

--

.push-right[
&lt;img src="https://en.natmus.dk/typo3temp/assets/images/csm_neky-holbech-16x9_b72c084303_2836164db1.jpg" width="80%" style="display: block; margin: auto;" /&gt;

&lt;img src="https://ichef.bbci.co.uk/news/976/cpsprodpb/6E2E/production/_113460282_mediaitem113460280.jpg" width="80%" style="display: block; margin: auto;" /&gt;
]

---
class: inverse
# Today's research questions

.left-column[
.font130[Is poverty lower in countries that have been independent longer?]

.font130[How do different colonial legacies compare to one another?]
]

.right-column[
.font130[.center[Colonial empires 1945]]
&lt;img src="https://upload.wikimedia.org/wikipedia/commons/a/a9/Colonization_1945.png" width="100%" style="display: block; margin: auto;" /&gt;
.center[*Source*: [.white[Wikipedia]](https://en.wikipedia.org/wiki/File:World_1914_empires_colonies_territory.PNG)]]

---
# Preparations

.panelset[
.panel[.panel-name[Packages for today's session]

``` r
pacman::p_load(
  tidyverse, # Data manipulation,
  ggplot2, # beautiful figures,
  kableExtra, # for table formatting,
  democracyData, # download democracy datasets used in the scholarly literature.
  wbstats, # download data from Worldbank. Tremendous source of global socio-economic data.
  estimatr, # OLS with robust SE,
  modelsummary) # regression tables with nice layout,
```
]
.panel[.panel-name[Get WB data]

``` r
(Dat &lt;- wb_data("SI.POV.DDAY", # Download poverty data: &lt;$2.15 per day,
                start_date = 2000, end_date = 2024) %&gt;%
   rename(poverty = SI.POV.DDAY) %&gt;% # rename poverty variable,
   select(country, date, poverty) %&gt;% # Keep only 3 variables
   drop_na(poverty) %&gt;% group_by(country) %&gt;% # Group by country,
   filter(date == max(date)) %&gt;% # Keep the most recent data per country.
   mutate(date = as.numeric(date)) %&gt;% ungroup())
# # A tibble: 165 × 3
#    country     date poverty
#    &lt;chr&gt;      &lt;dbl&gt;   &lt;dbl&gt;
#  1 Albania     2020     0  
#  2 Algeria     2011     0  
#  3 Angola      2018    31.1
#  4 Argentina   2022     0.6
#  5 Armenia     2022     0.8
#  6 Australia   2018     0.5
#  7 Austria     2021     0.5
#  8 Azerbaijan  2005     0  
#  9 Bangladesh  2022     5  
# 10 Belarus     2020     0  
# # ℹ 155 more rows
```
]]

---
# Colonial legacy

.panelset[
.panel[.panel-name[A study]

.push-left[
&lt;img src="./img/SocialForces.png" width="100%" style="display: block; margin: auto;" /&gt;
]

.push-right[
&lt;img src="./img/Colonial.png" width="100%" style="display: block; margin: auto;" /&gt;
.center[.backgrnote[*Source*: Lange and Dawson (2009)]]
]
]

.panel[.panel-name[Its data]

.push-left[
&lt;img src="./img/Colonial2.png" width="100%" style="display: block; margin: auto;" /&gt;
]

.push-right[
&lt;img src="./img/Colonial3.png" width="100%" style="display: block; margin: auto;" /&gt;
.center[.backgrnote[*Source*: Lange and Dawson (2009)]]
]]

.panel[.panel-name[Coding colonial powers]
.font90[

``` r
Dat &lt;- Dat %&gt;% 
  mutate(
    colonizer = case_when(
      str_detect(country, "Algeria|Benin|Burkina Faso|Cambodia|Central African Republic|Chad") |
        str_detect(country, "Djibouti|Gabon|Guinea|Haiti|Laos|Lebanon|Madagascar|Mali|Congo, Rep.|Cote D'Ivoire") | 
        str_detect(country, "Mauritania|Niger|Senegal|Syria|Togo|Tunisia|Viet Nam") ~ "France", # France
      str_detect(country, "Angola|Brazil|Mozambique|Guinea-Bissau") ~ "Portugal", # Portugal
      str_detect(country, "Argentina|Bolivia|Chile|Colombia|Costa Rica|Cuba|Dominican Republic|Ecuador") |
        str_detect(country, "El Salvador|Guatemala|Honduras|Mexico|Nicaragua|Panama|Paraguay|Peru") |
        str_detect(country, "Uruguay|Venezuela, RB") ~ "Spain", # Spain
      str_detect(country, "Bahrain|Bangladesh|Botswana|Cyprus|Egypt|Fiji") |
        str_detect(country, "Gambia|Ghana|Guyana|India|Iraq|Jamaica|Jordan|Kenya|Kuwait") |
        str_detect(country, "Lesotho|Malawi|Malaysia|Mauritius|Myanmar|Nigeria|Oman") | 
        str_detect(country, "Pakistan|Qatar|Sierra Leone|Singapore|South Africa") | 
        str_detect(country, "Sri Lanka|Sudan|Swaziland|Tanzania|Trinidad/Tobago|Uganda") | 
        str_detect(country, "United Arab Emirates|Yemen|Zambia|Zimbabwe") ~ "Britain", # Britain
      # Australia, Canada, Israel, New Zealand, United States; left out as settler societies
      str_detect(country, "Burundi|Congo, Dem. Rep.|Rwanda") ~ "Belgium")) # Belgium
      # str_detect(country, "Liberia|Philippines") ~ "USA", # USA
      # str_detect(country, "Libya|Somalia") ~ "Italy", # Italy
      # str_detect(country, "Indonesia") ~ "Holland", # Holland
      # str_detect(country, "Namibia") ~ "South Africa", # Holland
      # str_detect(country, "Korea|Taiwan") ~ "Japan")) # Japan
```
]]

.panel[.panel-name[Plot Colonizer]
&lt;img src="4-OLS-Wisdoms_files/figure-html/col-powers-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]

.panel[.panel-name[Coding independence]
.font60[

``` r
Dat &lt;- Dat %&gt;% 
  mutate(
    years_indep = case_when(
      is.na(colonizer) ~ as.numeric(NA),
      country == "United States" ~ date - 1783, country == "Haiti" ~ date - 1804, 
      country == "Paraguay" ~ date - 1811, country == "Chile" ~ date - 1818,
      str_detect(country, "Argentina|Bolivia|Colombia") ~ date - 1819,
      str_detect(country, "Costa Rica|Dominican Republic|Mexico|Nicaragua|Panama|El Salvador|Guatemala|Honduras|Venezuela") ~ date - 1821,
      str_detect(country, "Brazil|Ecuador") ~ date - 1822,
      country == "Peru" ~ date - 1824, country == "Uruguay" ~ date - 1828,
      country == "Cuba" ~ date - 1899, country == "Australia" ~ date - 1901,
      country == "New Zealand" ~ date - 1907, country == "South Africa" ~ date - 1910,
      country == "Egypt" ~ date - 1922, country == "Iraq" ~ date - 1932,
      str_detect(country, "Korea|Taiwan|Vietnam") ~ date - 1945,
      str_detect(country, "Lebanon|Philippines|Syria") ~ date - 1946,
      str_detect(country, "Bangladesh|Pakistan|India|Liberia") ~ date - 1947,
      str_detect(country, "Myanmar|Israel|Jordan|Sri Lanka") ~ date - 1948,
      country == "Indonesia" ~ date - 1949, country == "Libya" ~ date - 1951,
      str_detect(country, "Cambodia|Loas") ~ date - 1954,
      str_detect(country, "Morocco|Sudan|Tunisia") ~ date - 1956,
      str_detect(country, "Malaysia|Ghana") ~ date - 1957,
      country == "Guinea" ~ date - 1958, country == "Singapore" ~ date - 1959,
      str_detect(country, "Benin|Burkina Faso|Central African Republic|Chad|Congo, Dem. Rep.|Congo, Rep.|Code D'Ivoire|Mali|Mauritania|Niger|Nigeria|Senegal|Gabon|Somalia|Togo") ~ date - 1960,
      str_detect(country, "Kuwait|Sierra Leone|Tanzania") ~ date - 1961,
      str_detect(country, "Algeria|Burundi|Rwanda|Jamaica|Trinidad/ Tobago|Uganda") ~ date - 1962,
      country == "Kenya" ~ date - 1963,
      str_detect(country, "Malawi|Zambia") ~ date - 1964,
      str_detect(country, "Gambia|Zimbabwe") ~ date - 1965,
      str_detect(country, "Botswana|Lesotho|Guyana") ~ date - 1966,
      str_detect(country, "Canada|Yemen") ~ date - 1967,
      str_detect(country, "Mauritius|Swaziland") ~ date - 1968,
      country == "Fiji" ~ date - 1970,
      str_detect(country, "Bahrain|Oman|Qatar|United Arab Emirates") ~ date - 1971,
      country == "Guinea-Bissau" ~ date - 1974,
      str_detect(country, "Angola|Mozambigue|Papua New Guinea") ~ date - 1975,
      country == "Djibouti" ~ date - 1977, 
      country == "Namibia" ~ date - 1990))
```
]]

.panel[.panel-name[Plot indep.]
&lt;img src="4-OLS-Wisdoms_files/figure-html/pov-indep-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]]

---
# Poverty and years of independence

.left-column[.font90[

``` r
# Estimate OLS regression
ols &lt;- lm_robust(
  poverty ~ years_indep, 
  data = Dat)
# Regression table
modelsummary(
  list("Poverty" = ols), stars = TRUE,
  gof_map = c("nobs", "r.squared"), 
  output = "kableExtra")
```

&lt;table style="NAborder-bottom: 0; color: black; width: auto !important; margin-left: auto; margin-right: auto;" class="table"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt;   &lt;/th&gt;
   &lt;th style="text-align:center;"&gt; Poverty &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; (Intercept) &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 31.766*** &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (4.332) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; years_indep &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; −0.136*** &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;box-shadow: 0px 1.5px"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;box-shadow: 0px 1.5px"&gt; (0.024) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Num.Obs. &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 71 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; R2 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.174 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;tfoot&gt;&lt;tr&gt;&lt;td style="padding: 0; " colspan="100%"&gt;
&lt;sup&gt;&lt;/sup&gt; + p &amp;lt; 0.1, * p &amp;lt; 0.05, ** p &amp;lt; 0.01, *** p &amp;lt; 0.001&lt;/td&gt;&lt;/tr&gt;&lt;/tfoot&gt;
&lt;/table&gt;


]]

.right-column[
&lt;img src="4-OLS-Wisdoms_files/figure-html/indep-world-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]

---
class: inverse middle center
# OLS assumptions

---
class: clear
# OLS Assumptions

.left-column[
.content-box-blue[
1. **No outliers**
2. **Linearity**
3. Homoscedasticity; don't worry: `lm_robust()`.
4. Independent observations.

`\(\rightarrow\)` Scatter plots!
]]

.right-column[
&lt;iframe src='https://seeing-theory.brown.edu/regression-analysis/index.html#section1' width='700' height='580' frameborder='0' scrolling='yes'&gt;&lt;/iframe&gt;
]

---
# Outlier 

.left-column[
- **Gray dotted line:** OLS regression.

- **Leverage:** High influence on regression; `\(x_i\)` far from `\(\bar{x}\)`.
  

- **Z-standardized residuals:** Z-standardized residuals: Distance from regression line.
  + Example: Haiti (poverty rate 29.2%).


``` r
# Re-estimate model using lm(),
lm(poverty ~ years_indep, 
   data = Dat) %&gt;%
  # The best outlier plot.
* plot(., which = 5)
```
]

.right-column[
&lt;img src="4-OLS-Wisdoms_files/figure-html/unnamed-chunk-15-1.png" width="80%" style="display: block; margin: auto;" /&gt;
]

---
# An artificial outlier
.panelset[
.panel[.panel-name[Let's create an outlier]

``` r
Dat_outl &lt;- Dat %&gt;%
  mutate( # Let's create an outlier:
    years_indep = case_when(
      country == "Sweden" ~ 500, # years of independence
      TRUE ~ years_indep),
    poverty = case_when(
      country == "Sweden" ~ 99, # 99% poverty
      TRUE ~ poverty))
```
]

.panel[.panel-name[OLS]
.left-column[.font90[

``` r
ols_outl &lt;- lm_robust( # Estimation
  poverty ~ years_indep, 
  data = Dat_outl)

modelsummary( # Regression table
  list("Poverty" = ols_outl), stars = TRUE,
  gof_map = c("nobs", "r.squared"), 
  output = "kableExtra")
```

&lt;table style="NAborder-bottom: 0; color: black; width: auto !important; margin-left: auto; margin-right: auto;" class="table"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt;   &lt;/th&gt;
   &lt;th style="text-align:center;"&gt; Poverty &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; (Intercept) &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 21.255* &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (9.207) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; years_indep &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; −0.015 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;box-shadow: 0px 1.5px"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;box-shadow: 0px 1.5px"&gt; (0.099) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Num.Obs. &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 72 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; R2 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.003 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;tfoot&gt;&lt;tr&gt;&lt;td style="padding: 0; " colspan="100%"&gt;
&lt;sup&gt;&lt;/sup&gt; + p &amp;lt; 0.1, * p &amp;lt; 0.05, ** p &amp;lt; 0.01, *** p &amp;lt; 0.001&lt;/td&gt;&lt;/tr&gt;&lt;/tfoot&gt;
&lt;/table&gt;


]]

.right-column[
&lt;img src="4-OLS-Wisdoms_files/figure-html/Sweden-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]]
.panel[.panel-name[Outlier analysis]
.left-column[
- **Gray dotted line:** OLS regression.

- **Leverage:** High influence on regression; `\(x_i\)` far from `\(\bar{x}\)`.

- **Cook's D**: Change in `\(\sum{\hat{y}}\)` (in std. residuals) if case `\(i\)` removed


``` r
# Re-estimate model using lm(),
lm(poverty ~ years_indep, 
   data = Dat_outl) %&gt;%
  # The best outlier plot.
* plot(., which = 5)
```
]

.right-column[
&lt;img src="4-OLS-Wisdoms_files/figure-html/unnamed-chunk-18-1.png" width="75%" style="display: block; margin: auto;" /&gt;
]
]]

---
# Linearity

.left-column[
- **Gray dotted line:** OLS regression

- **Red line:** Smoothed relationship between residuals and fitted values

- **Ideal:** Red line matches gray dotted line

- **Our case:** Linearity assumption slightly violated, but generally acceptable


``` r
# Re-estimate model using lm(),
lm(poverty ~ years_indep, 
   data = Dat) %&gt;%
  # The best linearity plot.
* plot(., which = 1)
```
]

.right-column[
&lt;img src="4-OLS-Wisdoms_files/figure-html/unnamed-chunk-19-1.png" width="80%" style="display: block; margin: auto;" /&gt;
]

---
# Linearity .font70[And our outlier ...]

.left-column[
- **Gray dotted line:** OLS regression

- **Red line:** Smoothed relationship between residuals and fitted values

- **Ideal:** Red line matches gray dotted line


``` r
# Re-estimate model using lm(),
lm(poverty ~ years_indep, 
   data = Dat_outl) %&gt;%
  # The best linearity plot.
  plot(., which = 1)
```
]

.right-column[
&lt;img src="4-OLS-Wisdoms_files/figure-html/unnamed-chunk-20-1.png" width="80%" style="display: block; margin: auto;" /&gt;
]

---
class: inverse middle center
# Categorical predicators

---
# Categorical predicators

.panelset[
.panel[.panel-name[Scatter plot]

.left-column[
.content-box-green[
1. What `\(\hat{Y}\)` value corresponds to British-colonized countries?

2. What `\(\hat{Y}\)` value corresponds to Belgian-colonized countries?

3. How does this difference in `\(\hat{Y}\)` values relate to `\(\hat{\beta}\)`?
]]
.right-column[
&lt;img src="4-OLS-Wisdoms_files/figure-html/categorical-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]]

.panel[.panel-name[Dummy coding]

.push-left[
`$$x=
  \begin{cases}
    1, &amp; \text{if condition is met} \\
    0 &amp; \text{otherwise}
  \end{cases}$$`

Contintent                       | Belgium | France | ...
---------------------------------|----|----|----
Burundi                 | 1  | 0  | 0 
Rwanda                 | 1  | 0  | 0
...                 | 1  | 0  | 0
Cambodia                          | 0  | 1  | 0  
Algeria                          | 0  | 1  | 0
...                          | 0  | 1  | 0
Reference &lt;br&gt; .backgrnote[(Britain)] | 0  | 0  | 0
]

.push-right[
&lt;img src="4-OLS-Wisdoms_files/figure-html/categorical2-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]]

.panel[.panel-name[How it's done in R]
.push-left[.font70[

``` r
# R recognizes categorical variables automatically,
# if they are factor or character vectors.
ols_2 &lt;- lm_robust(poverty ~ colonizer, data = Dat)
# Regression table
modelsummary(
  list("Poverty" = ols_2), stars = TRUE,
  # Rename for a better-looking table
  coef_rename = c("colonizerFrance" = "France", 
                  "colonizerBelgium" = "Belgium",
                  "colonizerPortugal" = "Portugal", 
                  "colonizerSpain" = "Spain"),
  gof_map = c("nobs", "r.squared"), output = "kableExtra")
```
]

&lt;img src="4-OLS-Wisdoms_files/figure-html/unnamed-chunk-21-1.png" width="75%" style="display: block; margin: auto;" /&gt;
]
.push-right[
&lt;table style="NAborder-bottom: 0; color: black; width: auto !important; margin-left: auto; margin-right: auto;" class="table"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt;   &lt;/th&gt;
   &lt;th style="text-align:center;"&gt; Poverty &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; (Intercept) &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 18.853*** &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (3.977) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; France &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 5.112 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (5.913) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Spain &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; −15.453*** &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (4.069) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Belgium &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 45.480*** &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (8.796) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Portugal &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 17.513 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;box-shadow: 0px 1.5px"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;box-shadow: 0px 1.5px"&gt; (21.044) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Num.Obs. &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 76 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; R2 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.307 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;tfoot&gt;&lt;tr&gt;&lt;td style="padding: 0; " colspan="100%"&gt;
&lt;sup&gt;&lt;/sup&gt; + p &amp;lt; 0.1, * p &amp;lt; 0.05, ** p &amp;lt; 0.01, *** p &amp;lt; 0.001&lt;/td&gt;&lt;/tr&gt;&lt;/tfoot&gt;
&lt;/table&gt;


]]

.panel[.panel-name[Interpretation]
.push-left[.font90[
&lt;table style="NAborder-bottom: 0; color: black; width: auto !important; margin-left: auto; margin-right: auto;" class="table"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt;   &lt;/th&gt;
   &lt;th style="text-align:center;"&gt; Poverty &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; (Intercept) &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 18.853*** &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (3.977) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; France &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 5.112 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (5.913) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Spain &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; −15.453*** &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (4.069) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Belgium &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 45.480*** &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (8.796) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Portugal &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 17.513 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;box-shadow: 0px 1.5px"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;box-shadow: 0px 1.5px"&gt; (21.044) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Num.Obs. &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 76 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; R2 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.307 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;tfoot&gt;&lt;tr&gt;&lt;td style="padding: 0; " colspan="100%"&gt;
&lt;sup&gt;&lt;/sup&gt; + p &amp;lt; 0.1, * p &amp;lt; 0.05, ** p &amp;lt; 0.01, *** p &amp;lt; 0.001&lt;/td&gt;&lt;/tr&gt;&lt;/tfoot&gt;
&lt;/table&gt;


]]
.push-right[.font90[


$$
`\begin{aligned}
\operatorname{\widehat{poverty}} &amp;= 18.85 + 5.11(\operatorname{colonizer}_{\operatorname{France}})\ - \\
&amp;\quad 15.45(\operatorname{colonizer}_{\operatorname{Spain}}) + 45.48(\operatorname{colonizer}_{\operatorname{Belgium}})\ + \\
&amp;\quad 17.51(\operatorname{colonizer}_{\operatorname{Portugal}})
\end{aligned}`
$$


- Average poverty in British-colonized countries: 18.85% 
  + (When France = Belgium = Spain = Portugal = 0)

- French-colonized countries compared to British: 5.11 percentage points higher poverty on average
  + Difference not statistically significant&lt;br&gt; (may be due to chance)
  + Average poverty in French-colonized countries: 18.85% + 5.11% = 23.96%
]]]]

---
class: inverse middle center
# Break

&lt;iframe src='https://www.online-timer.net/' width='400' height='385' frameborder='0' scrolling='yes'&gt;&lt;/iframe&gt;

---
class: middle clear

.left-column[
&lt;img src="https://cdn.dribbble.com/users/10549/screenshots/9890798/media/f38f0e4d71d9763c7533641d2418b35b.png?compress=1&amp;resize=1200x900&amp;vertical=top" width="100%" style="display: block; margin: auto;" /&gt;

&lt;iframe src='https://www.online-timer.net/' width='400' height='385' frameborder='0' scrolling='yes'&gt;&lt;/iframe&gt;
]

.right-column[
&lt;br&gt;

&lt;iframe src='exercise1.html' width='1000' height='600' frameborder='0' scrolling='yes'&gt;&lt;/iframe&gt;
]

---
class: inverse middle center
# Break

&lt;iframe src='https://www.online-timer.net/' width='400' height='385' frameborder='0' scrolling='yes'&gt;&lt;/iframe&gt;

---
class: inverse middle center
# Binary outcomes

---
class: clear
# LPM versus Generalized Linear Models (GLM)

.left-column[
**Linear Probability Model (LPM)**:

- Uses OLS to predict binary outcomes &lt;br&gt; (0 = "No" / 1 = "Yes")

- Predicts `\(\hat{\text{P}(y_i = 1|x_{i})}\)`

- Controversial issues:
 + Violates linearity assumption
 + Can predict probabilities &lt; 0 or &gt; 1
]


.right-column[
&lt;img src="http://res.cloudinary.com/dyd911kmh/image/upload/f_auto,q_auto:best/v1523361626/linear_vs_logistic_regression_h8voek.jpg" width="100%" style="display: block; margin: auto;" /&gt;
.center[.backgrnote[*Source*: [datacamp: Logistic Regression in R Tutorial](https://www.datacamp.com/community/tutorials/logistic-regression-R)]]
]

---
# Logistic regression .font70[GLM for binary outcomes]

.push-left[
`$$\begin{align*}
\text{logit}(y_{i}) &amp;= \alpha + \beta x, \\
y_{i} &amp;= \text{logit}^{-1}(\alpha + \beta x) \\
&amp; = \text{logistic}(\alpha + \beta x) \\
&amp;= \frac{1}{1+e^{-(\alpha + \beta x)}}.
\end{align*}$$`



.font90[
| `\(\alpha + \beta x\)`  | `\(e^{(\alpha + \beta x)}\)` | `\(\frac{1}{e^{(\alpha + \beta x)}} \color{gray}{= e^{-(\alpha + \beta x)}}\)` | `\(\frac{1}{1 + e^{(\alpha + \beta x)}}\)` | `\(\frac{1}{1 +e^{-(\alpha + \beta x)}}\)` | 
|--------------------:|-------------------------:|-------------------------------------------------------------:|---------------------------------------:|---------------------------------------:|
|        -2           | 0.135                    | 7.389                                                        | 0.881                                  | 0.119                                  | 
|        -1           | 0.368                    | 2.718                                                        | 0.731                                  | 0.269                                  | 
|         0           | 1                        | 1                                                            | 0.5                                    | 0.5                                    | 
|         1           | 2.718                    | 0.368                                                        | 0.269                                  | 0.731                                  | 
|         2           | 7.389                    | 0.135                                                        | 0.119                                  | 0.881                                  |

]]

.push-right[
We need a 'link function' `\(g^{-1}\)` that maps the linear model results to the [0, 1] range. The sigmoid-shaped logistic function serves this purpose, with its inverse being the logit (log odds).

&lt;img src="4-OLS-Wisdoms_files/figure-html/Logit-fun-1.png" width="80%" style="display: block; margin: auto;" /&gt;

---
class: middle center

GLMs (e.g., logistic regression) have their own issues (Breen, Karlson, and Holm, 2018).

.alert[We use Linear Probability Models for binary outcomes.]

For categorical outcomes, use 0/1 coding.

---
class: inverse middle center
# Visualizing regression models

---
class: clear
# (1) Coefficient plots

.panelset[
.panel[.panel-name[Preparation]

``` r
(plotdata &lt;- lm_robust(poverty ~ colonizer, data = Dat) %&gt;%
*  tidy() %&gt;% # Turn results into a tibble,
   mutate( # Rename variables for the plot.
     term = case_when(
       term == "colonizerFrance" ~ "France",
       term == "colonizerSpain" ~ "Spain",
       term == "colonizerBelgium" ~ "Belgium",
       term == "colonizerPortugal" ~ "Portugal",
       term == "(Intercept)" ~ "Intercept \n (Britain)")) %&gt;%
   filter(term != "Intercept \n (Britain)"))
#       term estimate std.error statistic  p.value conf.low conf.high df outcome
# 1   France     5.11      5.91     0.865 3.90e-01    -6.68     16.90 71 poverty
# 2    Spain   -15.45      4.07    -3.798 3.05e-04   -23.57     -7.34 71 poverty
# 3  Belgium    45.48      8.80     5.171 2.06e-06    27.94     63.02 71 poverty
# 4 Portugal    17.51     21.04     0.832 4.08e-01   -24.45     59.47 71 poverty
```
]

.panel[.panel-name[Plotting]

``` r
ggplot(data = plotdata, 
       aes(y = estimate,
           # Order by effect size
           x = reorder(term, estimate))) +
  # Reference line
  geom_hline(yintercept = 0, color = "red", lty = "dashed") + 
  # Point with confidence interval,
* geom_pointrange(aes(min = conf.low, max = conf.high)) +
* coord_flip() + # Flip Y- &amp; X-Axis,
  labs(title = "OLS regression results",
       x = "Countries colonized by:",
       y = "Difference in poverty rate compared to countries colonized by Britain") +
  theme_minimal()
```
]
.panel[.panel-name[Plot]
.push-left[
&lt;img src="4-OLS-Wisdoms_files/figure-html/unnamed-chunk-29-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]
.push-right[
&lt;table style="NAborder-bottom: 0; color: black; width: auto !important; margin-left: auto; margin-right: auto;" class="table"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt;   &lt;/th&gt;
   &lt;th style="text-align:center;"&gt; Poverty &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; (Intercept) &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 18.853*** &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (3.977) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; France &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 5.112 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (5.913) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Spain &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; −15.453*** &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (4.069) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Belgium &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 45.480*** &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (8.796) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Portugal &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 17.513 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;box-shadow: 0px 1.5px"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;box-shadow: 0px 1.5px"&gt; (21.044) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Num.Obs. &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 76 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; R2 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.307 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;tfoot&gt;&lt;tr&gt;&lt;td style="padding: 0; " colspan="100%"&gt;
&lt;sup&gt;&lt;/sup&gt; + p &amp;lt; 0.1, * p &amp;lt; 0.05, ** p &amp;lt; 0.01, *** p &amp;lt; 0.001&lt;/td&gt;&lt;/tr&gt;&lt;/tfoot&gt;
&lt;/table&gt;


]]]

---
# (2) Model predictions

.panelset[
.panel[.panel-name[OLS model]
.push-left[

``` r
(ols &lt;- lm_robust(poverty ~ years_indep, data = Dat))
#             Estimate Std. Error t value Pr(&gt;|t|) CI Lower CI Upper DF
# (Intercept)   31.766     4.3318    7.33 3.30e-10   23.124  40.4072 69
# years_indep   -0.136     0.0244   -5.59 4.18e-07   -0.185  -0.0878 69
```
]
.push-right[
&lt;img src="4-OLS-Wisdoms_files/figure-html/Coefplot2-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]]
.panel[.panel-name[Predictions]
.push-left[.font90[
**Step 1**: Create synthetic (i.e., fictional)  `\(x\)` data with theoretically relevant values.


``` r
(fict_dat &lt;- tibble( # Create a new tibble named 'fict_dat'
  # Generate a sequence from 1 to 500. 
  # This represents years of independence
  years_indep = 1:500))
# # A tibble: 500 × 1
#    years_indep
#          &lt;int&gt;
#  1           1
#  2           2
#  3           3
#  4           4
#  5           5
#  6           6
#  7           7
#  8           8
#  9           9
# 10          10
# # ℹ 490 more rows
```
]]
.push-right[.font90[
**Step 2**: Predict `\(\hat{y}\)` from OLS model for our synthetic data.
]
.font80[

``` r
(fict_dat &lt;- predict( # Generates predictions
  object = ols, # Use the previously fitted OLS model
  newdata = fict_dat, # Apply the model to our synthetic data
  # Calculate 95% confidence intervals and fitted values
  interval = "confidence", level = 0.95)$fit %&gt;% 
   as_tibble() %&gt;% # Convert results to a tibble (data frame)
   # Combine original synthetic data with predictions
   # (. represents the piped prediction results)
   bind_cols(fict_dat, .))
# # A tibble: 500 × 4
#    years_indep   fit   lwr   upr
#          &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
#  1           1  31.6  23.0  40.2
#  2           2  31.5  22.9  40.0
#  3           3  31.4  22.9  39.9
#  4           4  31.2  22.8  39.7
#  5           5  31.1  22.7  39.5
#  6           6  30.9  22.6  39.3
#  7           7  30.8  22.5  39.1
#  8           8  30.7  22.4  38.9
#  9           9  30.5  22.3  38.8
# 10          10  30.4  22.2  38.6
# # ℹ 490 more rows
```
]]]
.panel[.panel-name[Visualization]
.push-left[.font80[

``` r
# Plots years of independence on the x-axis and 
# predicted poverty on the y-axis
ggplot(data = fict_dat, aes(y = fit, x = years_indep)) +
  # Add vertical reference lines at 34 and 236 years
  geom_vline(xintercept = c(34, 236),
             color = "red", lty = "dashed") +
  # Add shaded area for 95% confidence interval
  geom_ribbon(aes(ymin = lwr, ymax = upr), alpha = 0.5) +
  # Add the main prediction line (OLS regression line)
  geom_line() +
  # Set labels for the plot
  labs(
    title = "Prediction based on OLS regression",
    x = "Years since independence",
    y = "Predicted average of extreme poverty") +
  # Use a minimal theme for clean appearance
  theme_minimal()
```
]]
.push-right[
&lt;img src="4-OLS-Wisdoms_files/figure-html/unnamed-chunk-34-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]]]

---
# Learning goal achieved!

.left-column[
.font130[Is poverty lower in countries that have been independent longer?]

.font130[How do different colonial legacies compare to one another?]
]

.right-column[
&lt;img src="4-OLS-Wisdoms_files/figure-html/unnamed-chunk-35-1.png" width="60%" style="display: block; margin: auto;" /&gt;

&lt;img src="4-OLS-Wisdoms_files/figure-html/unnamed-chunk-36-1.png" width="60%" style="display: block; margin: auto;" /&gt;
]

---
class: inverse middle center
# Break

&lt;iframe src='https://www.online-timer.net/' width='400' height='385' frameborder='0' scrolling='yes'&gt;&lt;/iframe&gt;

---
class: middle clear

.left-column[
&lt;img src="https://cdn.dribbble.com/users/10549/screenshots/9890798/media/f38f0e4d71d9763c7533641d2418b35b.png?compress=1&amp;resize=1200x900&amp;vertical=top" width="100%" style="display: block; margin: auto;" /&gt;

&lt;iframe src='https://www.online-timer.net/' width='400' height='385' frameborder='0' scrolling='yes'&gt;&lt;/iframe&gt;
]

.right-column[
&lt;br&gt;

&lt;iframe src='exercise2.html' width='1000' height='600' frameborder='0' scrolling='yes'&gt;&lt;/iframe&gt;
]

---
class: inverse
# Today's general lessons

1. Outliers can significantly impact OLS regression results. Cook's D helps identify these outliers.

2. OLS assumes a linear relationship between continuous predictors and outcomes. Verify this assumption, but disregard for categorical predictors.

3. Categorical predictors in regression are typically dummy coded, showing average outcome differences between each category and a reference group.

4. R automatically dummy codes categorical variables in OLS regression, using the first category as the reference.

5. Coefficient plots are standard for visualizing OLS regression results.

6. For continuous predictors, visualizing model predictions with synthetic data points is valuable.

---
# Today's (important) functions

- Post `lm()` diagnostics:
  + `plot(model, which = 5)`: Identify outliers
  + `plot(model, which = 1)`: Check linearity assumption

- Useful functions:
  + `tidy()`: Convert OLS results to tibble
  + `predict()`: Apply model to synthetic data to obtain `\(\hat{Y}\)`

---
# References

.font80[
Breen, R., K. B. Karlson, and A. Holm (2018). "Interpreting and Understanding Logits, Probits, and
Other NonLinear Probability Models". In: _Annual Review of Sociology_, pp. 39-54.

Lange, M. and A. Dawson (2009). "Dividing and Ruling the World? A Statistical Test of the Effects of
Colonialism on Postcolonial Civil Violence". In: _Social Forces_, pp. 785-817.
]
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="../template/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightLanguage": "r",
"highlightStyle": "zenburn",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
